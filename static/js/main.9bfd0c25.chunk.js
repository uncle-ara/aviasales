(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,function(e,t,c){e.exports={base:"Ticket_base__3If-5",row:"Ticket_row__ZDAJM",column:"Ticket_column__2ugUo",header:"Ticket_header__Lo5AC",price:"Ticket_price__2e9GY",carrier:"Ticket_carrier__2RcdZ",body:"Ticket_body__Z2R4w",title:"Ticket_title__vHGBE",value:"Ticket_value__1rnd3"}},,function(e,t,c){e.exports={base:"App_base__2lbIl",header:"App_header__uDacY",price:"App_price__1dXm4",logo:"App_logo__1R47W",content:"App_content__25y52",left:"App_left__2FLNk",right:"App_right__9tkOM",sorts:"App_sorts__vTADT",tickets:"App_tickets__3af3J",more:"App_more__OGcxf"}},function(e,t,c){e.exports={base:"Checkbox_base__uGuAm",checkbox:"Checkbox_checkbox__3aZIR",checkbox_selected:"Checkbox_checkbox_selected__2jBIa",label:"Checkbox_label__B-qDr"}},,,,function(e,t,c){e.exports={base:"Filters_base__1_YXe",title:"Filters_title__10TLX",checkbox:"Filters_checkbox__3DCzM"}},function(e,t,c){e.exports={base:"Sort_base__1lExt",button:"Sort_button__1ChCe",button_selected:"Sort_button_selected__3Vqwu"}},,,,,,,,,,function(e,t,c){},,function(e,t,c){"use strict";c.r(t);var a,n,r=c(1),s=c.n(r),i=c(13),l=c.n(i),o=c(6),u=c(14),b=c(12),j=c(3),d=c(9),h=c.n(d),_=c(7),f=c.n(_),m=c(5),O=c.n(m),p=c(0),v=function(e){var t=e.label,c=e.value,a=e.onChange;return Object(p.jsxs)("div",{className:O.a.base,onClick:function(){return a(!c)},children:[Object(p.jsx)("div",{className:f()(O.a.checkbox,c&&O.a.checkbox_selected)}),Object(p.jsx)("div",{className:O.a.label,children:t})]})},x=s.a.memo(v);!function(e){e[e.All=0]="All",e[e.Direct=1]="Direct",e[e.OneTransfer=2]="OneTransfer",e[e.TwoTransfer=3]="TwoTransfer",e[e.ThreeTransfer=4]="ThreeTransfer"}(n||(n={}));var g,T=[{type:n.All,label:"\u0412\u0441\u0435"},{type:n.Direct,label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},{type:n.OneTransfer,label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"},{type:n.TwoTransfer,label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{type:n.ThreeTransfer,label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}],k=(a={},Object(j.a)(a,n.All,!0),Object(j.a)(a,n.Direct,!0),Object(j.a)(a,n.OneTransfer,!0),Object(j.a)(a,n.TwoTransfer,!0),Object(j.a)(a,n.ThreeTransfer,!0),a),N=function(e,t,c){var a;return t===n.All?function(e,t){var c={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(c[a]=t);return c}(e,c):Object(b.a)(Object(b.a)({},e),{},(a={},Object(j.a)(a,t,c),Object(j.a)(a,n.All,!1),a))},C=function(e){var t=e.filters,c=e.onChange;return Object(p.jsxs)("div",{className:h.a.base,children:[Object(p.jsx)("div",{className:h.a.title,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),T.map((function(e){var a=e.type,n=e.label;return Object(p.jsx)("div",{className:h.a.checkbox,children:Object(p.jsx)(x,{label:n,value:t[a],onChange:function(e){return c(N(t,a,e))}})},a)}))]})},y=s.a.memo(C),A=c(10),w=c.n(A);!function(e){e[e.Cheap=0]="Cheap",e[e.Fast=1]="Fast",e[e.Optimal=2]="Optimal"}(g||(g={}));var S=[{type:g.Cheap,text:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{type:g.Fast,text:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"},{type:g.Optimal,text:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439"}],D=function(e){var t=e.onSelect,c=e.selected;return Object(p.jsx)("div",{className:w.a.base,children:S.map((function(e){var a=e.type,n=e.text;return Object(p.jsx)("button",{className:f()(w.a.button,c===a&&w.a.button_selected),onClick:function(){return t(a)},children:n},a)}))})},F=s.a.memo(D),I=function(e,t,c){var a=e-c.length;if(a<1)return c;for(var n=c,r=0;r<a;r++)n=t+n;return n},M=function(e){var t=I(2,"0",e.getHours().toString()),c=I(2,"0",e.getMinutes().toString());return"".concat(t,":").concat(c)},J=function(e,t){var c=new Date(e),a=new Date(c.getTime()+6e4*t);return"".concat(M(c)," - ").concat(M(a))},L=function(e,t){var c=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:c>1&&c<5?t[1]:1==c?t[0]:t[2]},B=c(2),E=c.n(B),G=function(e){var t=e.price,c=e.carrier,a=e.segments;return Object(p.jsxs)("div",{className:E.a.base,children:[Object(p.jsxs)("div",{className:E.a.header,children:[Object(p.jsxs)("div",{className:E.a.price,children:[t.toLocaleString("ru")," \u0420"]}),Object(p.jsx)("div",{className:E.a.carrier,children:Object(p.jsx)("img",{src:"http://pics.avs.io/99/36/".concat(c,".png")})})]}),Object(p.jsx)("div",{className:E.a.body,children:a.map((function(e,t){var c,a=e.origin,n=e.destination,r=e.date,s=e.stops,i=e.duration;return Object(p.jsxs)("div",{className:E.a.row,children:[Object(p.jsxs)("div",{className:E.a.column,children:[Object(p.jsxs)("div",{className:E.a.title,children:[a,"-",n]}),Object(p.jsx)("div",{className:E.a.value,children:J(r,i)})]}),Object(p.jsxs)("div",{className:E.a.column,children:[Object(p.jsx)("div",{className:E.a.title,children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(p.jsx)("div",{className:E.a.value,children:(c=i,Math.trunc(c/60)+"\u0447 "+c%60+"\u043c")})]}),Object(p.jsx)("div",{className:E.a.column,children:0===s.length?Object(p.jsx)("div",{className:E.a.title,children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:E.a.title,children:[s.length," ",L(s.length,["\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"])]}),Object(p.jsx)("div",{className:E.a.value,children:s.join(", ")})]})})]},t)}))})]})},R=c(4),Z=c.n(R),P=function(e,t){var c,a=Object(u.a)(e);try{for(a.s();!(c=a.n()).done;){if(c.value.stops.length>t)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},X=function(e){return e.segments.reduce((function(e,t){return e+t.duration}),0)},Y=function(e){return e.segments.reduce((function(e,t){return e+t.stops.length}),0)},q=s.a.memo((function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(5),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(r.useState)(k),j=Object(o.a)(b,2),d=j[0],h=j[1],_=Object(r.useState)([]),f=Object(o.a)(_,2),m=f[0],O=f[1];Object(r.useEffect)((function(){var e=localStorage.getItem("ticketsCache");try{var t=e&&JSON.parse(e),c=t.tickets,a=t.date;if(Date.now()-a<18e5)return O(c)}catch(n){console.warn("Invalid cache",n)}!function e(){fetch("https://front-test.beta.aviasales.ru/search").then((function(e){return e.json()})).then((function(e){var t=e.searchId;return fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t))})).then((function(e){return e.json()})).then((function(e){var t=e.tickets;localStorage.setItem("ticketsCache",JSON.stringify({tickets:t,date:Date.now()})),O(t)})).catch(e)}()}),[]);return Object(p.jsxs)("div",{className:Z.a.base,children:[Object(p.jsx)("div",{className:Z.a.header,children:Object(p.jsx)("div",{className:Z.a.logo})}),Object(p.jsxs)("div",{className:Z.a.content,children:[Object(p.jsx)("div",{className:Z.a.left,children:Object(p.jsx)(y,{filters:d,onChange:h})}),Object(p.jsxs)("div",{className:Z.a.right,children:[Object(p.jsx)("div",{className:Z.a.sort,children:Object(p.jsx)(F,{onSelect:a,selected:c})}),Object(p.jsx)("div",{className:Z.a.tickets,children:m.filter((function(e){return!!d[n.All]||(!(!d[n.OneTransfer]||!P(e.segments,1))||(!(!d[n.TwoTransfer]||!P(e.segments,2))||(!(!d[n.ThreeTransfer]||!P(e.segments,3))||!(!d[n.Direct]||!P(e.segments,0)))))})).sort((function(e,t){return c===g.Cheap?e.price-t.price:c===g.Fast?X(e)-X(t):c===g.Optimal?Y(e)-Y(t):0})).slice(0,l).map((function(e){var t=e.price,c=e.carrier,a=e.segments;return Object(p.jsx)(G,{price:t,carrier:c,segments:a})}))}),Object(p.jsx)("button",{className:Z.a.more,onClick:function(){u((function(e){return e+5}))},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})]})]})]})})),H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,23)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};c(20),c(21);l.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),H()}],[[22,1,2]]]);
//# sourceMappingURL=main.9bfd0c25.chunk.js.map